<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - BimaChord</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind Custom Config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          animation: {
            fadeInUp: 'fadeInUp 0.8s ease-out both',
          },
          keyframes: {
            fadeInUp: {
              '0%': { opacity: 0, transform: 'translateY(20px)' },
              '100%': { opacity: 1, transform: 'translateY(0)' },
            }
          }
        }
      }
    }
  </script>

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="icon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon/favicon-32x32.png">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ffffff" />
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 px-4">

  <div class="w-full max-w-md bg-white p-8 rounded-3xl shadow-2xl animate-fadeInUp">
    <div class="text-center mb-6">
      <h2 class="text-3xl font-bold text-gray-800">Login</h2>
      <p class="text-sm text-gray-500">Welcome back to <span class="font-medium text-blue-500">BimaChord</span></p>
    </div>

    <!-- Login Form -->
    <form id="login-form" class="space-y-5">
      <div>
        <input type="text" id="username" placeholder="Username" required
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-200" />
      </div>
      <div>
        <input type="password" id="password" placeholder="Password" required
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-200" />
      </div>
      <button type="submit"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition duration-200 shadow-md hover:shadow-lg">
        Login
      </button>
      <div id="error-message" class="text-red-600 text-sm text-center mt-2"></div>
    </form>

    <div class="my-6 flex items-center gap-4">
      <hr class="flex-grow border-gray-300">
      <span class="text-gray-500 text-sm">OR</span>
      <hr class="flex-grow border-gray-300">
    </div>

    <!-- Google Login Button -->
    <button onclick="loginWithGoogle()" class="w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-100 text-gray-700 font-semibold py-3 rounded-xl shadow transition duration-200">
      <svg class="w-5 h-5" viewBox="0 0 48 48">
        <path fill="#EA4335" d="M24 9.5c3.3 0 6.2 1.1 8.5 3.1l6.3-6.3C34.9 2.3 29.8 0 24 0 14.6 0 6.7 5.8 2.7 14.3l7.3 5.7C12 13.2 17.5 9.5 24 9.5z"/>
        <path fill="#4285F4" d="M46.1 24.5c0-1.6-.1-3.1-.4-4.5H24v8.5h12.4c-.5 2.7-2.1 5-4.3 6.6v5.5h7c4.1-3.8 6.5-9.4 6.5-16.1z"/>
        <path fill="#FBBC05" d="M10 28.2c-.6-1.6-1-3.3-1-5.2s.3-3.6 1-5.2l-7.3-5.7C1 15.2 0 19.5 0 24s1 8.8 2.7 12.4l7.3-5.7z"/>
        <path fill="#34A853" d="M24 48c6.5 0 12-2.1 16-5.8l-7-5.5c-2 1.4-4.5 2.3-9 2.3-6.5 0-12-4.4-14-10.5l-7.3 5.7C6.7 42.2 14.6 48 24 48z"/>
        <path fill="none" d="M0 0h48v48H0z"/>
      </svg>
      Login with Google
    </button>

    <div class="mt-6">
      <a href="register.html"
        class="block text-center bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 rounded-xl transition duration-200">
        Create New Account
      </a>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>

  <script>
    // Firebase config
    var firebaseConfig = {
      apiKey: "AIzaSyCxgwhRJeRailX_oDGp6XrqIAsD6wVilU8",
      authDomain: "userbc-d8204.firebaseapp.com",
      projectId: "userbc-d8204",
      storageBucket: "userbc-d8204.appspot.com",
      messagingSenderId: "941116930960",
      appId: "1:941116930960:web:71d002aabbbedf45a21115",
      measurementId: "G-JQ0SDKH6MT"
    };
    firebase.initializeApp(firebaseConfig);

    // Email/password login
    document.getElementById('login-form').addEventListener('submit', function (e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const errorMessage = document.getElementById('error-message');
      errorMessage.textContent = '';

      const email = username + "@bimachord.com";

      firebase.auth().signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          window.location.href = 'index.html';
        })
        .catch(error => {
          if (['auth/user-not-found', 'auth/wrong-password'].includes(error.code)) {
            errorMessage.textContent = 'Invalid username or password.';
          } else {
            errorMessage.textContent = 'Something went wrong. Please try again.';
          }
        });
    });

    // Google login
    function loginWithGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();
      firebase.auth().signInWithPopup(provider)
        .then(result => {
          window.location.href = 'index.html';
        })
        .catch(error => {
          console.error(error);
          alert("Google login failed: " + error.message);
        });
    }
  </script>

</body>
</html>
